<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>GRINS-0.6.0: GRINS::MeshBuilder Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">GRINS-0.6.0
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceGRINS.html">GRINS</a></li><li class="navelem"><a class="el" href="classGRINS_1_1MeshBuilder.html">MeshBuilder</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="classGRINS_1_1MeshBuilder-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">GRINS::MeshBuilder Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="mesh__builder_8h_source.html">mesh_builder.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae21fc43d2068ac567ab5f42ede11d029"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGRINS_1_1MeshBuilder.html#ae21fc43d2068ac567ab5f42ede11d029">MeshBuilder</a> ()</td></tr>
<tr class="memdesc:ae21fc43d2068ac567ab5f42ede11d029"><td class="mdescLeft">&#160;</td><td class="mdescRight">This Object handles building a libMesh::UnstructuredMesh subclass.  <a href="#ae21fc43d2068ac567ab5f42ede11d029">More...</a><br /></td></tr>
<tr class="separator:ae21fc43d2068ac567ab5f42ede11d029"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97406495f6affba38f13de943233049f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGRINS_1_1MeshBuilder.html#a97406495f6affba38f13de943233049f">~MeshBuilder</a> ()</td></tr>
<tr class="separator:a97406495f6affba38f13de943233049f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b9c395135587ea19b504f89948ae452"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGRINS_1_1MeshBuilder.html#a6b9c395135587ea19b504f89948ae452">read_input_options</a> (const GetPot &amp;input)</td></tr>
<tr class="separator:a6b9c395135587ea19b504f89948ae452"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a795577b8aedd4db3fd831f1831c33733"><td class="memItemLeft" align="right" valign="top">std::tr1::shared_ptr&lt; libMesh::UnstructuredMesh &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGRINS_1_1MeshBuilder.html#a795577b8aedd4db3fd831f1831c33733">build</a> (const GetPot &amp;input, const libMesh::Parallel::Communicator &amp;comm LIBMESH_CAN_DEFAULT_TO_COMMWORLD)</td></tr>
<tr class="memdesc:a795577b8aedd4db3fd831f1831c33733"><td class="mdescLeft">&#160;</td><td class="mdescRight">Builds the libMesh::Mesh according to input options.  <a href="#a795577b8aedd4db3fd831f1831c33733">More...</a><br /></td></tr>
<tr class="separator:a795577b8aedd4db3fd831f1831c33733"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62b99e25f5b793f8dcd89838ea9e7e9f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGRINS_1_1MeshBuilder.html#a62b99e25f5b793f8dcd89838ea9e7e9f">do_mesh_refinement_from_input</a> (const GetPot &amp;input, const libMesh::Parallel::Communicator &amp;comm, libMesh::UnstructuredMesh &amp;mesh) const </td></tr>
<tr class="memdesc:a62b99e25f5b793f8dcd89838ea9e7e9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Refine the mesh based on user input parameters.  <a href="#a62b99e25f5b793f8dcd89838ea9e7e9f">More...</a><br /></td></tr>
<tr class="separator:a62b99e25f5b793f8dcd89838ea9e7e9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:af6957fb9e4453e64c19d1bfc1f355b44"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGRINS_1_1MeshBuilder.html#af6957fb9e4453e64c19d1bfc1f355b44">generate_mesh</a> (const std::string &amp;mesh_build_type, const GetPot &amp;input, libMesh::UnstructuredMesh *mesh)</td></tr>
<tr class="separator:af6957fb9e4453e64c19d1bfc1f355b44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac608d3a75a51bc35909c4ee44b9d32da"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:ac608d3a75a51bc35909c4ee44b9d32da"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classGRINS_1_1MeshBuilder.html#ac608d3a75a51bc35909c4ee44b9d32da">deprecated_option</a> (const GetPot &amp;input, const std::string &amp;old_option, const std::string &amp;new_option, const T &amp;default_value, T &amp;option_value) const </td></tr>
<tr class="memdesc:ac608d3a75a51bc35909c4ee44b9d32da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function for displaying deprecated warnings.  <a href="#ac608d3a75a51bc35909c4ee44b9d32da">More...</a><br /></td></tr>
<tr class="separator:ac608d3a75a51bc35909c4ee44b9d32da"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="mesh__builder_8h_source.html#l00043">43</a> of file <a class="el" href="mesh__builder_8h_source.html">mesh_builder.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ae21fc43d2068ac567ab5f42ede11d029"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GRINS::MeshBuilder::MeshBuilder </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This Object handles building a libMesh::UnstructuredMesh subclass. </p>
<p>Based on runtime input, either a generic 1, 2, or 3-dimensional mesh is built; or is read from input from a specified file. </p>

<p>Definition at line <a class="el" href="mesh__builder_8C_source.html#l00046">46</a> of file <a class="el" href="mesh__builder_8C_source.html">mesh_builder.C</a>.</p>
<div class="fragment"><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  {</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a97406495f6affba38f13de943233049f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GRINS::MeshBuilder::~MeshBuilder </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mesh__builder_8C_source.html#l00051">51</a> of file <a class="el" href="mesh__builder_8C_source.html">mesh_builder.C</a>.</p>
<div class="fragment"><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  {</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a795577b8aedd4db3fd831f1831c33733"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::tr1::shared_ptr&lt; libMesh::UnstructuredMesh &gt; GRINS::MeshBuilder::build </td>
          <td>(</td>
          <td class="paramtype">const GetPot &amp;&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const libMesh::Parallel::Communicator &amp;comm&#160;</td>
          <td class="paramname"><em>LIBMESH_CAN_DEFAULT_TO_COMMWORLD</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Builds the libMesh::Mesh according to input options. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000064">Todo:</a></b></dt><dd>Can remove last 4 checks once mesh-options/mesh_option support is removed. </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000065">Todo:</a></b></dt><dd>Need to a check a GMSH meshes </dd></dl>

<p>Definition at line <a class="el" href="mesh__builder_8C_source.html#l00057">57</a> of file <a class="el" href="mesh__builder_8C_source.html">mesh_builder.C</a>.</p>
<div class="fragment"><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  {</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="comment">// First check if the user has both old and new versions of mesh input</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordflow">if</span>( input.have_section(<span class="stringliteral">&quot;mesh-options/&quot;</span>) &amp;&amp;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        input.have_section(<span class="stringliteral">&quot;Mesh/&quot;</span>) )</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;      {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        libmesh_error_msg(<span class="stringliteral">&quot;Error: Detected illegal simulataneous use of [mesh-options] and [Mesh] in input!&quot;</span>);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;      }</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="comment">// User needs to tell us if we are generating or reading a mesh</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="comment">// We infer this by checking and seeing if the use has a Mesh/Read</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="comment">// or a Mesh/Generation section</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keywordflow">if</span>( !input.have_variable(<span class="stringliteral">&quot;mesh-options/mesh_option&quot;</span>) &amp;&amp;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        !input.have_section(<span class="stringliteral">&quot;Mesh/Read/&quot;</span>) &amp;&amp;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        !input.have_section(<span class="stringliteral">&quot;Mesh/Generation/&quot;</span>) )</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;      {</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        libmesh_error_msg(<span class="stringliteral">&quot;ERROR: Must specify either Mesh/Read or Mesh/Generation in input.&quot;</span>);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;      }</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="comment">// But you can&#39;t have it both ways</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordflow">if</span>( input.have_section(<span class="stringliteral">&quot;Mesh/Read/&quot;</span>) &amp;&amp; input.have_section(<span class="stringliteral">&quot;Mesh/Generation/&quot;</span>) )</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;      {</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        libmesh_error_msg(<span class="stringliteral">&quot;ERROR: Can only specify one of Mesh/Read and Mesh/Generation&quot;</span>);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      }</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="comment">// Are we generating the mesh or are we reading one in from a file?</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    std::string mesh_build_type = <span class="stringliteral">&quot;NULL&quot;</span>;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordflow">if</span>( input.have_section(<span class="stringliteral">&quot;Mesh/Read/&quot;</span>) )</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;      mesh_build_type = <span class="stringliteral">&quot;read&quot;</span>;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>( input.have_section(<span class="stringliteral">&quot;Mesh/Generation/&quot;</span>) )</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      mesh_build_type = <span class="stringliteral">&quot;generate&quot;</span>;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    this-&gt;deprecated_option&lt;std::string&gt;( input, <span class="stringliteral">&quot;mesh-options/mesh_option&quot;</span>, <span class="stringliteral">&quot;Mesh/Read or Mesh/Generation&quot;</span>, <span class="stringliteral">&quot;DIE!&quot;</span>, mesh_build_type);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="comment">// Make sure the user gave a valid option</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment"></span>    <span class="keywordflow">if</span>( mesh_build_type != std::string(<span class="stringliteral">&quot;generate&quot;</span>) &amp;&amp;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        mesh_build_type != std::string(<span class="stringliteral">&quot;read&quot;</span>) &amp;&amp;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        mesh_build_type != std::string(<span class="stringliteral">&quot;read_mesh_from_file&quot;</span>) &amp;&amp;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        mesh_build_type != std::string(<span class="stringliteral">&quot;create_1D_mesh&quot;</span>) &amp;&amp;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        mesh_build_type != std::string(<span class="stringliteral">&quot;create_2D_mesh&quot;</span>) &amp;&amp;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        mesh_build_type != std::string(<span class="stringliteral">&quot;create_3D_mesh&quot;</span>) )</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;      {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        std::string error = <span class="stringliteral">&quot;ERROR: Invalid value of &quot;</span>+mesh_build_type+<span class="stringliteral">&quot; for Mesh/type.\n&quot;</span>;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;          error += <span class="stringliteral">&quot;       Valid values are: generate\n&quot;</span>;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;          error += <span class="stringliteral">&quot;                         read\n&quot;</span>;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;          libmesh_error_msg(error);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="comment">// Create UnstructuredMesh object (defaults to dimension 1).</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    libMesh::UnstructuredMesh* mesh;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="comment">// Were we specifically asked to use a ParallelMesh or SerialMesh?</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    {</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;      std::string mesh_class = input(<span class="stringliteral">&quot;Mesh/class&quot;</span>, <span class="stringliteral">&quot;default&quot;</span>);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      this-&gt;deprecated_option&lt;std::string&gt;( input, <span class="stringliteral">&quot;mesh-options/mesh_class&quot;</span>, <span class="stringliteral">&quot;Mesh/class&quot;</span>, <span class="stringliteral">&quot;default&quot;</span>, mesh_class);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      <span class="keywordflow">if</span> (mesh_class == <span class="stringliteral">&quot;parallel&quot;</span>)</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        mesh = <span class="keyword">new</span> libMesh::ParallelMesh(comm);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mesh_class == <span class="stringliteral">&quot;serial&quot;</span>)</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        mesh = <span class="keyword">new</span> libMesh::SerialMesh(comm);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mesh_class == <span class="stringliteral">&quot;default&quot;</span>)</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        mesh = <span class="keyword">new</span> libMesh::Mesh(comm);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;          std::string error = <span class="stringliteral">&quot;ERROR: Invalid class &quot;</span>+mesh_class+<span class="stringliteral">&quot; input for Mesh/class.\n&quot;</span>;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            error += <span class="stringliteral">&quot;       Valid choices are: serial, parallel.\n&quot;</span>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            libmesh_error_msg(error);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        }</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    }</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="comment">// Read mesh from file</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">if</span>(mesh_build_type ==<span class="stringliteral">&quot;read_mesh_from_file&quot;</span> <span class="comment">/* This is deprecated */</span> ||</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;       mesh_build_type == <span class="stringliteral">&quot;read&quot;</span> )</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="comment">// Make sure the user set the filename to read</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="keywordflow">if</span>( !input.have_variable(<span class="stringliteral">&quot;mesh-options/mesh_filename&quot;</span>) <span class="comment">/* This is deprecated */</span> &amp;&amp;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            !input.have_variable(<span class="stringliteral">&quot;Mesh/Read/filename&quot;</span>) )</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;          {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            libmesh_error_msg(<span class="stringliteral">&quot;ERROR: Must specify Mesh/Read/filename for reading mesh.&quot;</span>);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;          }</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        std::string mesh_filename = input(<span class="stringliteral">&quot;Mesh/Read/filename&quot;</span>, <span class="stringliteral">&quot;DIE!&quot;</span>);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        this-&gt;deprecated_option&lt;std::string&gt;( input, <span class="stringliteral">&quot;mesh-options/mesh_filename&quot;</span>, <span class="stringliteral">&quot;Mesh/Read/filename&quot;</span>, <span class="stringliteral">&quot;DIE!&quot;</span>, mesh_filename);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="comment">// According to Roy Stogner, the only read format</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="comment">// that won&#39;t properly reset the dimension is gmsh.</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment"></span>        mesh-&gt;read(mesh_filename);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      }</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="comment">// Generate the mesh using built-in libMesh functions</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(mesh_build_type==<span class="stringliteral">&quot;create_1D_mesh&quot;</span> <span class="comment">/* This is deprecated */</span> ||</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            mesh_build_type==<span class="stringliteral">&quot;create_2D_mesh&quot;</span> <span class="comment">/* This is deprecated */</span> ||</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;            mesh_build_type==<span class="stringliteral">&quot;create_3D_mesh&quot;</span> <span class="comment">/* This is deprecated */</span> ||</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            mesh_build_type==<span class="stringliteral">&quot;generate&quot;</span>)</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        this-&gt;<a class="code" href="classGRINS_1_1MeshBuilder.html#af6957fb9e4453e64c19d1bfc1f355b44">generate_mesh</a>(mesh_build_type,input,mesh);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      }</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="comment">// Shouldn&#39;t have gotten here</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        libmesh_error();</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      }</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="comment">/* Only do the mesh refinement here if we don&#39;t have a restart file.</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">       Otherwise, we need to wait until we&#39;ve read in the restart file.</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">       That is done in Simulation::check_for_restart */</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">if</span>( !input.have_variable(<span class="stringliteral">&quot;restart-options/restart_file&quot;</span>) )</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        this-&gt;<a class="code" href="classGRINS_1_1MeshBuilder.html#a62b99e25f5b793f8dcd89838ea9e7e9f">do_mesh_refinement_from_input</a>( input, comm, *mesh );</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      }</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordflow">return</span> std::tr1::shared_ptr&lt;libMesh::UnstructuredMesh&gt;(mesh);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  }</div>
<div class="ttc" id="classGRINS_1_1MeshBuilder_html_af6957fb9e4453e64c19d1bfc1f355b44"><div class="ttname"><a href="classGRINS_1_1MeshBuilder.html#af6957fb9e4453e64c19d1bfc1f355b44">GRINS::MeshBuilder::generate_mesh</a></div><div class="ttdeci">void generate_mesh(const std::string &amp;mesh_build_type, const GetPot &amp;input, libMesh::UnstructuredMesh *mesh)</div><div class="ttdef"><b>Definition:</b> <a href="mesh__builder_8C_source.html#l00178">mesh_builder.C:178</a></div></div>
<div class="ttc" id="classGRINS_1_1MeshBuilder_html_a62b99e25f5b793f8dcd89838ea9e7e9f"><div class="ttname"><a href="classGRINS_1_1MeshBuilder.html#a62b99e25f5b793f8dcd89838ea9e7e9f">GRINS::MeshBuilder::do_mesh_refinement_from_input</a></div><div class="ttdeci">void do_mesh_refinement_from_input(const GetPot &amp;input, const libMesh::Parallel::Communicator &amp;comm, libMesh::UnstructuredMesh &amp;mesh) const </div><div class="ttdoc">Refine the mesh based on user input parameters. </div><div class="ttdef"><b>Definition:</b> <a href="mesh__builder_8C_source.html#l00360">mesh_builder.C:360</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac608d3a75a51bc35909c4ee44b9d32da"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void GRINS::MeshBuilder::deprecated_option </td>
          <td>(</td>
          <td class="paramtype">const GetPot &amp;&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>old_option</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>new_option</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const T &amp;&#160;</td>
          <td class="paramname"><em>default_value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">T &amp;&#160;</td>
          <td class="paramname"><em>option_value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper function for displaying deprecated warnings. </p>

<p>Definition at line <a class="el" href="mesh__builder_8h_source.html#l00085">85</a> of file <a class="el" href="mesh__builder_8h_source.html">mesh_builder.h</a>.</p>

<p>References <a class="el" href="common_8h_source.html#l00034">grins_warning</a>.</p>

<p>Referenced by <a class="el" href="mesh__builder_8C_source.html#l00360">do_mesh_refinement_from_input()</a>, and <a class="el" href="mesh__builder_8C_source.html#l00178">generate_mesh()</a>.</p>
<div class="fragment"><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordflow">if</span>( input.have_variable(old_option) )</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        std::string warning = <span class="stringliteral">&quot;WARNING: &quot;</span>+old_option+<span class="stringliteral">&quot; is DEPRECATED.\n&quot;</span>;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        warning += <span class="stringliteral">&quot;         Please update to use &quot;</span>+new_option+<span class="stringliteral">&quot;.\n&quot;</span>;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <a class="code" href="common_8h.html#ac77f21bbf5117c0b910b8c6888e1c0ec">grins_warning</a>(warning);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        option_value = input(old_option, default_value);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      }</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  }</div>
<div class="ttc" id="common_8h_html_ac77f21bbf5117c0b910b8c6888e1c0ec"><div class="ttname"><a href="common_8h.html#ac77f21bbf5117c0b910b8c6888e1c0ec">grins_warning</a></div><div class="ttdeci">#define grins_warning(message)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00034">common.h:34</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a62b99e25f5b793f8dcd89838ea9e7e9f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GRINS::MeshBuilder::do_mesh_refinement_from_input </td>
          <td>(</td>
          <td class="paramtype">const GetPot &amp;&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const libMesh::Parallel::Communicator &amp;&#160;</td>
          <td class="paramname"><em>comm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">libMesh::UnstructuredMesh &amp;&#160;</td>
          <td class="paramname"><em>mesh</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Refine the mesh based on user input parameters. </p>
<p>There are several parameters that allow for the user to specify mesh refinements. They are factored out here because where we need to apply the refinements depends on the existence of a restart file. </p>

<p>Definition at line <a class="el" href="mesh__builder_8C_source.html#l00360">360</a> of file <a class="el" href="mesh__builder_8C_source.html">mesh_builder.C</a>.</p>

<p>References <a class="el" href="mesh__builder_8h_source.html#l00085">deprecated_option()</a>.</p>

<p>Referenced by <a class="el" href="simulation_8C_source.html#l00257">GRINS::Simulation::init_restart()</a>.</p>
<div class="fragment"><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    std::string redistribution_function_string =</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            input(<span class="stringliteral">&quot;Mesh/Redistribution/function&quot;</span>, std::string(<span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    this-&gt;deprecated_option&lt;std::string&gt;( input, <span class="stringliteral">&quot;mesh-options/redistribute&quot;</span>, <span class="stringliteral">&quot;Mesh/Redistribution/function&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, redistribution_function_string );</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordflow">if</span> (redistribution_function_string != <span class="stringliteral">&quot;0&quot;</span>)</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      {</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        libMesh::ParsedFunction&lt;libMesh::Real&gt;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;          redistribution_function(redistribution_function_string);</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        libMesh::MeshTools::Modification::redistribute</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;          (mesh, redistribution_function);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        <span class="comment">// Redistribution can create distortions *within* second-order</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <span class="comment">// elements, which can then be magnified by refinement.  Let&#39;s</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="comment">// undistort everything by converting to first order and back</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <span class="comment">// if necessary.</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        <span class="comment">// FIXME - this only works for meshes with uniform geometry</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <span class="comment">// order equal to FIRST or (full-order) SECOND.</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <span class="keyword">const</span> libMesh::Elem *elem = *mesh.elements_begin();</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <span class="keywordflow">if</span> (elem-&gt;default_order() != libMesh::FIRST)</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;          {</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            mesh.all_first_order();</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            mesh.all_second_order();</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;          }</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      }</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keywordtype">int</span> uniformly_refine = input(<span class="stringliteral">&quot;Mesh/Refinement/uniformly_refine&quot;</span>, 0);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    this-&gt;<a class="code" href="classGRINS_1_1MeshBuilder.html#ac608d3a75a51bc35909c4ee44b9d32da">deprecated_option</a>( input, <span class="stringliteral">&quot;mesh-options/uniformly_refine&quot;</span>, <span class="stringliteral">&quot;Mesh/Refinement/uniformly_refine&quot;</span>, 0, uniformly_refine );</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keywordflow">if</span>( uniformly_refine &gt; 0 )</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      {</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        libMesh::MeshRefinement(mesh).uniformly_refine(uniformly_refine);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      }</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    std::string h_refinement_function_string =</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            input(<span class="stringliteral">&quot;Mesh/Refinement/locally_h_refine&quot;</span>, std::string(<span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    this-&gt;deprecated_option&lt;std::string&gt;( input, <span class="stringliteral">&quot;mesh-options/locally_h_refine&quot;</span>, <span class="stringliteral">&quot;Mesh/Refinement/locally_h_refine&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, h_refinement_function_string );</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordflow">if</span> (h_refinement_function_string != <span class="stringliteral">&quot;0&quot;</span>)</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      { </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        libMesh::ParsedFunction&lt;libMesh::Real&gt;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;          h_refinement_function(h_refinement_function_string);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        libMesh::MeshRefinement mesh_refinement(mesh);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        libMesh::dof_id_type found_refinements = 0;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;          found_refinements = 0;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;          <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> max_level_refining = 0;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;          libMesh::MeshBase::element_iterator elem_it =</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                  mesh.active_elements_begin();</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;          libMesh::MeshBase::element_iterator elem_end =</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                  mesh.active_elements_end();</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;          <span class="keywordflow">for</span> (; elem_it != elem_end; ++elem_it)</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            {</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;              libMesh::Elem *elem = *elem_it;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;              <span class="keyword">const</span> libMesh::Real refinement_val =</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                h_refinement_function(elem-&gt;centroid());</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;              <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n_refinements = refinement_val &gt; 0 ?</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                refinement_val : 0;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;              <span class="keywordflow">if</span> (elem-&gt;level() - uniformly_refine &lt; n_refinements)</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                {</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                  elem-&gt;set_refinement_flag(libMesh::Elem::REFINE);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                  found_refinements++;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                  max_level_refining = std::max(max_level_refining,</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                                                elem-&gt;level());</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                }</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;            }</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;          comm.max(found_refinements);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;          comm.max(max_level_refining);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;          <span class="keywordflow">if</span> (found_refinements)</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;            {</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;              std::cout &lt;&lt; <span class="stringliteral">&quot;Found up to &quot;</span> &lt;&lt; found_refinements &lt;&lt; </div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                <span class="stringliteral">&quot; elements to refine on each processor,&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;              std::cout &lt;&lt; <span class="stringliteral">&quot;with max level &quot;</span> &lt;&lt; max_level_refining &lt;&lt; std::endl;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;              mesh_refinement.refine_and_coarsen_elements();</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;              <span class="keywordflow">if</span>( input.have_variable(<span class="stringliteral">&quot;restart-options/restart_file&quot;</span>) )</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                {</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                  std::cout &lt;&lt; <span class="stringliteral">&quot;Warning: it is known that locally_h_refine is broken when restarting.&quot;</span> &lt;&lt; std::endl</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                            &lt;&lt; <span class="stringliteral">&quot;         and multiple refinement passes are done. We are forcibly&quot;</span> &lt;&lt; std::endl</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                            &lt;&lt; <span class="stringliteral">&quot;         limiting the refinement to one pass until this issue is resolved.&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                  <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                }</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            }</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        } <span class="keywordflow">while</span>(found_refinements);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      }</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  }</div>
<div class="ttc" id="classGRINS_1_1MeshBuilder_html_ac608d3a75a51bc35909c4ee44b9d32da"><div class="ttname"><a href="classGRINS_1_1MeshBuilder.html#ac608d3a75a51bc35909c4ee44b9d32da">GRINS::MeshBuilder::deprecated_option</a></div><div class="ttdeci">void deprecated_option(const GetPot &amp;input, const std::string &amp;old_option, const std::string &amp;new_option, const T &amp;default_value, T &amp;option_value) const </div><div class="ttdoc">Helper function for displaying deprecated warnings. </div><div class="ttdef"><b>Definition:</b> <a href="mesh__builder_8h_source.html#l00085">mesh_builder.h:85</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af6957fb9e4453e64c19d1bfc1f355b44"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void GRINS::MeshBuilder::generate_mesh </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>mesh_build_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const GetPot &amp;&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">libMesh::UnstructuredMesh *&#160;</td>
          <td class="paramname"><em>mesh</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mesh__builder_8C_source.html#l00178">178</a> of file <a class="el" href="mesh__builder_8C_source.html">mesh_builder.C</a>.</p>

<p>References <a class="el" href="mesh__builder_8h_source.html#l00085">deprecated_option()</a>.</p>
<div class="fragment"><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> dimension = input(<span class="stringliteral">&quot;Mesh/Generation/dimension&quot;</span>,0);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">if</span>( !input.have_variable(<span class="stringliteral">&quot;mesh-options/mesh_option&quot;</span>) <span class="comment">/* Deprecated */</span> &amp;&amp;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        !input.have_variable(<span class="stringliteral">&quot;Mesh/Generation/dimension&quot;</span>) )</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        libmesh_error_msg(<span class="stringliteral">&quot;ERROR: Must specify Mesh/Generation/dimension for generating mesh.&quot;</span>);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      }</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="comment">/* Remove these once suport for mesh-options/mesh_option is removed */</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">if</span>( mesh_build_type == <span class="stringliteral">&quot;create_1D_mesh&quot;</span> <span class="comment">/* This is deprecated */</span> )</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      dimension = 1;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">if</span>( mesh_build_type==<span class="stringliteral">&quot;create_2D_mesh&quot;</span> <span class="comment">/* This is deprecated */</span> )</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      dimension = 2;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordflow">if</span>( mesh_build_type==<span class="stringliteral">&quot;create_3D_mesh&quot;</span> <span class="comment">/* This is deprecated */</span> )</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      dimension = 3;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="comment">// Set the mesh dimension</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    mesh-&gt;set_mesh_dimension(dimension);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="comment">/* Now look for spatial extent of the grid that the user wants to generate. */</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    libMesh::Real x_min = input(<span class="stringliteral">&quot;Mesh/Generation/x_min&quot;</span>, 0.0);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    this-&gt;<a class="code" href="classGRINS_1_1MeshBuilder.html#ac608d3a75a51bc35909c4ee44b9d32da">deprecated_option</a>( input, <span class="stringliteral">&quot;mesh-options/domain_x1_min&quot;</span>, <span class="stringliteral">&quot;Mesh/Generation/x_min&quot;</span>, 0.0, x_min );</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    libMesh::Real x_max = input(<span class="stringliteral">&quot;Mesh/Generation/x_max&quot;</span>, 1.0);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    this-&gt;<a class="code" href="classGRINS_1_1MeshBuilder.html#ac608d3a75a51bc35909c4ee44b9d32da">deprecated_option</a>( input, <span class="stringliteral">&quot;mesh-options/domain_x1_max&quot;</span>, <span class="stringliteral">&quot;Mesh/Generation/x_max&quot;</span>, 1.0, x_max );</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="comment">/* We only check the y_{min,max} input if dimension is &gt; 1 so that GetPot</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">       UFO detection will give us an error if we have this in the input file</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">       and are only using a 1D grid. */</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    libMesh::Real y_min = 0.0;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    libMesh::Real y_max = 0.0;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">if</span>( dimension &gt; 1 )</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        y_min = input(<span class="stringliteral">&quot;Mesh/Generation/y_min&quot;</span>, 0.0);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        this-&gt;<a class="code" href="classGRINS_1_1MeshBuilder.html#ac608d3a75a51bc35909c4ee44b9d32da">deprecated_option</a>( input, <span class="stringliteral">&quot;mesh-options/domain_x2_min&quot;</span>, <span class="stringliteral">&quot;Mesh/Generation/y_min&quot;</span>, 0.0, y_min );</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        y_max = input(<span class="stringliteral">&quot;Mesh/Generation/y_max&quot;</span>, 1.0);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        this-&gt;<a class="code" href="classGRINS_1_1MeshBuilder.html#ac608d3a75a51bc35909c4ee44b9d32da">deprecated_option</a>( input, <span class="stringliteral">&quot;mesh-options/domain_x2_max&quot;</span>, <span class="stringliteral">&quot;Mesh/Generation/y_max&quot;</span>, 1.0, y_max );</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      }</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="comment">/* We only check the z_{min,max} input if dimension is &gt; 2 so that GetPot</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment">       UFO detection will give us an error if we have this in the input file</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">       and are only using a 1D or 2D grid. */</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    libMesh::Real z_min = 0.0;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    libMesh::Real z_max = 0.0;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">if</span>( dimension &gt; 2 )</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        z_min = input(<span class="stringliteral">&quot;Mesh/Generation/z_min&quot;</span>, 0.0);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        this-&gt;<a class="code" href="classGRINS_1_1MeshBuilder.html#ac608d3a75a51bc35909c4ee44b9d32da">deprecated_option</a>( input, <span class="stringliteral">&quot;mesh-options/domain_x3_min&quot;</span>, <span class="stringliteral">&quot;Mesh/Generation/z_min&quot;</span>, 0.0, z_min );</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        z_max = input(<span class="stringliteral">&quot;Mesh/Generation/z_max&quot;</span>, 1.0);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        this-&gt;<a class="code" href="classGRINS_1_1MeshBuilder.html#ac608d3a75a51bc35909c4ee44b9d32da">deprecated_option</a>( input, <span class="stringliteral">&quot;mesh-options/domain_x3_max&quot;</span>, <span class="stringliteral">&quot;Mesh/Generation/z_max&quot;</span>, 1.0, z_max );</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      }</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="comment">/* Now check for the number of elements in each direction */</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="comment">// Make sure user gave us info about how many elements to use</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">if</span>( !input.have_variable(<span class="stringliteral">&quot;mesh-options/mesh_nx1&quot;</span>) <span class="comment">/* Deprecated */</span> &amp;&amp;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        !input.have_variable(<span class="stringliteral">&quot;Mesh/Generation/n_elems_x&quot;</span>) )</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        libmesh_error_msg(<span class="stringliteral">&quot;ERROR: Must supply Mesh/Generation/n_elems_x for mesh generation.&quot;</span>);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      }</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n_elems_x = input(<span class="stringliteral">&quot;Mesh/Generation/n_elems_x&quot;</span>, 0);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    this-&gt;deprecated_option&lt;unsigned int&gt;( input, <span class="stringliteral">&quot;mesh-options/mesh_nx1&quot;</span>, <span class="stringliteral">&quot;Mesh/Generation/n_elems_x&quot;</span>, 0, n_elems_x );</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="comment">/* We only check n_elems_y input if dimension is &gt; 1 so that GetPot</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">       UFO detection will give us an error if we have this in the input file</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">       and are only using a 1D grid. */</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n_elems_y = 0;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordflow">if</span>( dimension &gt; 1 )</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <span class="keywordflow">if</span>( !input.have_variable(<span class="stringliteral">&quot;mesh-options/mesh_nx2&quot;</span>) <span class="comment">/* Deprecated */</span> &amp;&amp;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        !input.have_variable(<span class="stringliteral">&quot;Mesh/Generation/n_elems_y&quot;</span>) )</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;          {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            libmesh_error_msg(<span class="stringliteral">&quot;ERROR: Must supply Mesh/Generation/n_elems_y for mesh generation.&quot;</span>);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;          }</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        n_elems_y = input(<span class="stringliteral">&quot;Mesh/Generation/n_elems_y&quot;</span>, 0);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        this-&gt;deprecated_option&lt;unsigned int&gt;( input, <span class="stringliteral">&quot;mesh-options/mesh_nx2&quot;</span>, <span class="stringliteral">&quot;Mesh/Generation/n_elems_y&quot;</span>, 0, n_elems_y );</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      }</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="comment">/* We only check n_elems_z input if dimension is &gt; 2 so that GetPot</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">       UFO detection will give us an error if we have this in the input file</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">       and are only using a 1D or 2D grid. */</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n_elems_z = 0;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">if</span>( dimension &gt; 2 )</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      {</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="keywordflow">if</span>( !input.have_variable(<span class="stringliteral">&quot;mesh-options/mesh_nx3&quot;</span>) <span class="comment">/* Deprecated */</span> &amp;&amp;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        !input.have_variable(<span class="stringliteral">&quot;Mesh/Generation/n_elems_z&quot;</span>) )</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;          {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            libmesh_error_msg(<span class="stringliteral">&quot;ERROR: Must supply Mesh/Generation/n_elems_z for mesh generation.&quot;</span>);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;          }</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        n_elems_z = input(<span class="stringliteral">&quot;Mesh/Generation/n_elems_z&quot;</span>, 0);</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        this-&gt;deprecated_option&lt;unsigned int&gt;( input, <span class="stringliteral">&quot;mesh-options/mesh_nx3&quot;</span>, <span class="stringliteral">&quot;Mesh/Generation/n_elems_z&quot;</span>, 0, n_elems_z );</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      }</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="comment">/* Now grab the element_type the user wants for the mesh. */</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    std::string element_type = input(<span class="stringliteral">&quot;Mesh/Generation/element_type&quot;</span>, <span class="stringliteral">&quot;default&quot;</span>);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    this-&gt;deprecated_option&lt;std::string&gt;( input, <span class="stringliteral">&quot;mesh-options/element_type&quot;</span>, <span class="stringliteral">&quot;Mesh/Generation/element_type&quot;</span>, <span class="stringliteral">&quot;default&quot;</span>, element_type );</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="comment">/* Now generate the mesh. */</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordflow">if</span>( dimension == 1 )</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      {</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <span class="keywordflow">if</span>(element_type==<span class="stringliteral">&quot;default&quot;</span>)</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;          {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            element_type = <span class="stringliteral">&quot;EDGE3&quot;</span>;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;          }</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        GRINSEnums::ElemType element_enum_type =</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;          libMesh::Utility::string_to_enum&lt;GRINSEnums::ElemType&gt;(element_type);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        libMesh::MeshTools::Generation::build_line(*mesh,</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                                                   n_elems_x,</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                                                   x_min,</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                                                   x_max,</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                                                   element_enum_type);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      }</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>( dimension == 2 )</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      {</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <span class="keywordflow">if</span>(element_type==<span class="stringliteral">&quot;default&quot;</span>)</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;          {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            element_type = <span class="stringliteral">&quot;TRI6&quot;</span>;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;          }</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        GRINSEnums::ElemType element_enum_type =</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;          libMesh::Utility::string_to_enum&lt;GRINSEnums::ElemType&gt;(element_type);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        libMesh::MeshTools::Generation::build_square(*mesh,</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                                                     n_elems_x,</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                                                     n_elems_y,</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                                                     x_min,</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                                                     x_max,</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                                                     y_min,</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                                                     y_max,</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                                                     element_enum_type);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      }</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>( dimension == 3 )</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <span class="keywordflow">if</span>(element_type==<span class="stringliteral">&quot;default&quot;</span>)</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;          {</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            element_type = <span class="stringliteral">&quot;TET10&quot;</span>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;          }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        GRINSEnums::ElemType element_enum_type =</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;          libMesh::Utility::string_to_enum&lt;GRINSEnums::ElemType&gt;(element_type);</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        libMesh::MeshTools::Generation::build_cube(*mesh,</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                                                   n_elems_x,</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                                                   n_elems_y,</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                                                   n_elems_z,</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                                                   x_min,</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                                                   x_max,</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                                                   y_min,</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                                                   y_max,</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                                                   z_min,</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                                                   z_max,</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                                                   element_enum_type);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      }</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      {</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <span class="comment">// This shouldn&#39;t have happened</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        libmesh_error();</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      }</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  }</div>
<div class="ttc" id="classGRINS_1_1MeshBuilder_html_ac608d3a75a51bc35909c4ee44b9d32da"><div class="ttname"><a href="classGRINS_1_1MeshBuilder.html#ac608d3a75a51bc35909c4ee44b9d32da">GRINS::MeshBuilder::deprecated_option</a></div><div class="ttdeci">void deprecated_option(const GetPot &amp;input, const std::string &amp;old_option, const std::string &amp;new_option, const T &amp;default_value, T &amp;option_value) const </div><div class="ttdoc">Helper function for displaying deprecated warnings. </div><div class="ttdef"><b>Definition:</b> <a href="mesh__builder_8h_source.html#l00085">mesh_builder.h:85</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6b9c395135587ea19b504f89948ae452"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GRINS::MeshBuilder::read_input_options </td>
          <td>(</td>
          <td class="paramtype">const GetPot &amp;&#160;</td>
          <td class="paramname"><em>input</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/solver/include/grins/<a class="el" href="mesh__builder_8h_source.html">mesh_builder.h</a></li>
<li>src/solver/src/<a class="el" href="mesh__builder_8C_source.html">mesh_builder.C</a></li>
</ul>
</div><!-- contents -->
<hr size="1"/><address style="text-align: right;"><small>
Generated on Mon Jun 22 2015 21:32:23 for GRINS-0.6.0
by&nbsp;<a href="http://www.doxygen.org/index.html">
<em>doxygen</em></a>
1.8.9.1</small></address>
</body>
</html>
